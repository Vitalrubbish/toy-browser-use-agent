# Web Agent Control Center - å‰ç«¯ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€è®¾è®¡ç²¾ç¾çš„ Web Agent æ§åˆ¶ç•Œé¢ï¼Œæ”¯æŒä»»åŠ¡ç®¡ç†ã€å®æ—¶ç›‘æ§å’Œå¯è§†åŒ–ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªä¸ºä½ çš„ Web Agent è®¾è®¡çš„å‰ç«¯æ§åˆ¶ç³»ç»Ÿï¼ŒåŒ…å«:
- **ç°ä»£åŒ– UI**: ç§‘æŠ€æ„Ÿçš„æ·±è‰²ä¸»é¢˜ï¼Œéœ“è™¹è‰²å½©ï¼Œæµç•…åŠ¨ç”»
- **å®Œæ•´åŠŸèƒ½**: ä»»åŠ¡æ§åˆ¶ã€å®æ—¶æ—¥å¿—ã€æµè§ˆå™¨é¢„è§ˆã€ç»Ÿè®¡é¢æ¿
- **æ˜“äºé›†æˆ**: æä¾›æ¸…æ™°çš„ API æ¥å£ï¼Œå¯å¿«é€Ÿå¯¹æ¥ä½ çš„ Agent åç«¯

## ğŸ“ æ–‡ä»¶æ¸…å•

```
frontend/
â”œâ”€â”€ index.html              # ä¸»ç•Œé¢ HTML (ç§‘æŠ€æ„Ÿè®¾è®¡)
â”œâ”€â”€ agent-controller.js     # å‰ç«¯æ§åˆ¶å™¨ (ä»»åŠ¡ç®¡ç†ã€API è°ƒç”¨)
â”œâ”€â”€ api_server.py          # Flask åç«¯æœåŠ¡å™¨ (RESTful API)
â”œâ”€â”€ start.py               # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ FRONTEND_GUIDE.md      # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â””â”€â”€ FRONTEND_README.md     # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„æ–¹å¼ - ä¸€é”®å¯åŠ¨

```bash
# è¿è¡Œå¯åŠ¨è„šæœ¬,ä¼šè‡ªåŠ¨:
# 1. æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
# 2. å¯åŠ¨ API æœåŠ¡å™¨
# 3. å¯åŠ¨å‰ç«¯æœåŠ¡å™¨
# 4. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç•Œé¢
python start.py
```

### æ‰‹åŠ¨å¯åŠ¨

**æ­¥éª¤ 1: å®‰è£…ä¾èµ–**
```bash
pip install flask flask-cors
```

**æ­¥éª¤ 2: å¯åŠ¨åç«¯ API**
```bash
python api_server.py
# æœåŠ¡è¿è¡Œåœ¨ http://localhost:5000
```

**æ­¥éª¤ 3: æ‰“å¼€å‰ç«¯**
```bash
# æ–¹å¼ A: ä½¿ç”¨ç®€å• HTTP æœåŠ¡å™¨
python -m http.server 8080
# ç„¶åè®¿é—® http://localhost:8080/index.html

# æ–¹å¼ B: ç›´æ¥æ‰“å¼€ HTML (æŸäº›åŠŸèƒ½å¯èƒ½å—é™)
open index.html
```

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### ä¸»è¦åŒºåŸŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   WEB AGENT                              â”‚
â”‚           Autonomous Browser Control System              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚                                    â”‚
â”‚  Mission Control    â”‚      Browser Preview               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç³»ç»Ÿå°±ç»ª      â”‚  â”‚  â”‚                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   [æµè§ˆå™¨é¢„è§ˆåŒºåŸŸ]           â”‚ â”‚
â”‚                     â”‚  â”‚                              â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ ä»»åŠ¡æŒ‡ä»¤      â”‚  â”‚                                    â”‚
â”‚  â”‚ [è¾“å…¥æ¡†]      â”‚  â”‚      Execution Logs                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                     â”‚  â”‚ [00:00:00] ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ    â”‚ â”‚
â”‚  [å¯åŠ¨ä»»åŠ¡]         â”‚  â”‚ [00:00:01] æ­¥éª¤ 1: ...       â”‚ â”‚
â”‚  [åœæ­¢æ‰§è¡Œ]         â”‚  â”‚ [00:00:02] æ­¥éª¤ 2: ...       â”‚ â”‚
â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”   â”‚                                    â”‚
â”‚  â”‚æ€»æ­¥æ•°â”‚æˆåŠŸç‡â”‚   â”‚                                    â”‚
â”‚  â”‚  0   â”‚  0%  â”‚   â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜   â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡ç‰¹è‰²

1. **éœ“è™¹ç§‘æŠ€é£**
   - æ·±è‰²èƒŒæ™¯ (#0a0e17)
   - é’è‰²ä¸»è‰²è°ƒ (#00f0ff)
   - ç´«è‰²ç‚¹ç¼€ (#b84fff)
   - åŠ¨æ€å…‰æ™•æ•ˆæœ

2. **å­—ä½“é€‰æ‹©**
   - æ ‡é¢˜: Orbitron (æœªæ¥ç§‘æŠ€æ„Ÿ)
   - æ­£æ–‡: JetBrains Mono (ç­‰å®½ç¼–ç¨‹å­—ä½“)

3. **åŠ¨ç”»æ•ˆæœ**
   - æ ‡é¢˜å‘å…‰åŠ¨ç”»
   - æ‰«æçº¿æ•ˆæœ
   - æŒ‰é’®æ³¢çº¹åé¦ˆ
   - æ—¥å¿—æ»‘å…¥åŠ¨ç”»
   - çŠ¶æ€ç‚¹è„‰å†²

## ğŸ”Œ ä¸ Agent é›†æˆ

### é›†æˆä½ çš„ Orchestrator

ç¼–è¾‘ `api_server.py` ä¸­çš„ `TaskExecutor._execute()` æ–¹æ³•:

```python
def _execute(self):
    try:
        self.status = 'running'
        self._update_task_status()
        
        # 1. å¯¼å…¥ä½ çš„æ¨¡å—
        from orchestrator import Orchestrator
        from browser_module import BrowserObserver
        
        # 2. åˆå§‹åŒ–
        orchestrator = Orchestrator()
        
        # 3. è®¾ç½®æ—¥å¿—å›è°ƒ(å¯é€‰)
        def log_callback(message, level='info', **kwargs):
            self.add_log(message, level, **kwargs)
        
        if hasattr(orchestrator, 'set_log_callback'):
            orchestrator.set_log_callback(log_callback)
        
        # 4. è¿è¡Œä»»åŠ¡
        result = orchestrator.run(
            task_text=self.task_data['task_text'],
            constraints=self.task_data['constraints']
        )
        
        # 5. ä¿å­˜æˆªå›¾(å¦‚æœæœ‰)
        if 'screenshot' in result:
            screenshot_dir = './screenshots'
            os.makedirs(screenshot_dir, exist_ok=True)
            screenshot_path = f'{screenshot_dir}/{self.task_id}.png'
            result['screenshot'].save(screenshot_path)
            self.screenshot_path = screenshot_path
        
        # 6. æ›´æ–°çŠ¶æ€
        self.status = 'completed' if result.get('success') else 'failed'
        self._update_task_status()
        
    except Exception as e:
        self.status = 'failed'
        self.add_log(f'æ‰§è¡Œå¤±è´¥: {str(e)}', 'error')
        self._update_task_status()
```

### æ·»åŠ å®æ—¶æ—¥å¿—

åœ¨ä½ çš„ Orchestrator ä¸»å¾ªç¯ä¸­:

```python
class Orchestrator:
    def __init__(self):
        self.log_callback = None
    
    def set_log_callback(self, callback):
        """è®¾ç½®æ—¥å¿—å›è°ƒå‡½æ•°"""
        self.log_callback = callback
    
    def _log(self, message, level='info', **kwargs):
        """è®°å½•æ—¥å¿—"""
        if self.log_callback:
            self.log_callback(message, level, **kwargs)
    
    def run(self, task_text, constraints):
        self._log(f'å¼€å§‹æ‰§è¡Œä»»åŠ¡: {task_text}', 'info')
        
        step_count = 0
        while not is_done:
            step_count += 1
            
            # Agent å†³ç­–
            action = agent.decide(...)
            
            # è®°å½•æ—¥å¿—
            self._log(
                f'æ­¥éª¤ {step_count}: {action.type} on element {action.target_id}',
                'info',
                step=step_count,
                action=action.type
            )
            
            # æ‰§è¡ŒåŠ¨ä½œ
            result = executor.execute(action)
            
            # æ£€æŸ¥æ˜¯å¦å®Œæˆ
            is_done = agent.is_task_complete()
        
        self._log('ä»»åŠ¡æ‰§è¡Œå®Œæˆ', 'success')
        return {'success': True}
```

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### æ ¸å¿ƒç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/health` | GET | å¥åº·æ£€æŸ¥ |
| `/api/task/start` | POST | å¯åŠ¨æ–°ä»»åŠ¡ |
| `/api/task/status/<id>` | GET | æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ |
| `/api/task/stop` | POST | åœæ­¢ä»»åŠ¡ |
| `/api/tasks` | GET | åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡ |
| `/api/screenshot/<id>` | GET | è·å–æˆªå›¾ |

è¯¦ç»†çš„ API æ–‡æ¡£è¯·æŸ¥çœ‹ `FRONTEND_GUIDE.md`ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°

- [x] ä»»åŠ¡å¯åŠ¨/åœæ­¢æ§åˆ¶
- [x] å®æ—¶æ—¥å¿—æ˜¾ç¤º
- [x] çŠ¶æ€æŒ‡ç¤ºå™¨
- [x] ç»Ÿè®¡é¢æ¿(æ­¥æ•°ã€æˆåŠŸç‡)
- [x] å“åº”å¼è®¾è®¡
- [x] Mock æ¨¡å¼(æ— åç«¯æ¼”ç¤º)
- [x] è‡ªåŠ¨ä¾èµ–æ£€æŸ¥
- [x] ä¸€é”®å¯åŠ¨è„šæœ¬

### ğŸš§ å¯æ‰©å±•åŠŸèƒ½

- [ ] æµè§ˆå™¨å®æ—¶é¢„è§ˆ(éœ€è¦ WebSocket)
- [ ] ä»»åŠ¡å†å²è®°å½•
- [ ] é…ç½®é¢„è®¾ä¿å­˜
- [ ] å¤šä»»åŠ¡å¹¶å‘ç®¡ç†
- [ ] å¯¼å‡ºæ‰§è¡ŒæŠ¥å‘Š
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] æš—è‰²/äº®è‰²ä¸»é¢˜åˆ‡æ¢
- [ ] ä»»åŠ¡æ¨¡æ¿åº“

## ğŸ¨ è‡ªå®šä¹‰ä¸»é¢˜

### å¿«é€Ÿæ¢è‰²

ç¼–è¾‘ `index.html` çš„ CSS å˜é‡:

```css
:root {
    /* é’ç´«éœ“è™¹ä¸»é¢˜(é»˜è®¤) */
    --accent-cyan: #00f0ff;
    --accent-purple: #b84fff;
    
    /* æˆ–è€…è¯•è¯•çº¢æ©™ä¸»é¢˜ */
    --accent-cyan: #ff6b6b;
    --accent-purple: #ffa500;
    
    /* æˆ–è€…ç»¿è“ä¸»é¢˜ */
    --accent-cyan: #00ff88;
    --accent-purple: #00d4ff;
}
```

### æ›´æ¢å­—ä½“

```html
<!-- æ›¿æ¢ Google Fonts é“¾æ¥ -->
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
```

```css
h1 {
    font-family: 'Rajdhani', sans-serif;
}
```

## ğŸ“± å“åº”å¼æ”¯æŒ

ç•Œé¢å·²ä¼˜åŒ–æ”¯æŒ:
- ğŸ–¥ï¸ æ¡Œé¢ (1920x1080+)
- ğŸ’» ç¬”è®°æœ¬ (1366x768+)
- ğŸ“± å¹³æ¿ (768x1024)
- ğŸ“² æ‰‹æœº (375x667+)

## ğŸ› æ•…éšœæ’é™¤

### åç«¯æ— æ³•è¿æ¥

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5000

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>

# é‡æ–°å¯åŠ¨
python api_server.py
```

### CORS é”™è¯¯

ç¡®ä¿ `api_server.py` ä¸­å·²å¯ç”¨ CORS:
```python
from flask_cors import CORS
CORS(app)
```

### å‰ç«¯æ ·å¼é”™è¯¯

ä½¿ç”¨ HTTP æœåŠ¡å™¨è€Œéç›´æ¥æ‰“å¼€æ–‡ä»¶:
```bash
python -m http.server 8080
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `FRONTEND_GUIDE.md` - è¯¦ç»†ä½¿ç”¨æŒ‡å—å’Œ API æ–‡æ¡£
- `api_server.py` - æŸ¥çœ‹ä»£ç æ³¨é‡Šäº†è§£åç«¯å®ç°
- `agent-controller.js` - æŸ¥çœ‹å‰ç«¯æ§åˆ¶å™¨å®ç°

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯
- HTML5 + CSS3
- Vanilla JavaScript (æ— æ¡†æ¶ä¾èµ–)
- Google Fonts (Orbitron + JetBrains Mono)

### åç«¯
- Python 3.7+
- Flask (Web æ¡†æ¶)
- Flask-CORS (è·¨åŸŸæ”¯æŒ)

### å¯é€‰å¢å¼º
- WebSocket (å®æ—¶é€šä¿¡)
- Redis (ä»»åŠ¡é˜Ÿåˆ—)
- PostgreSQL (æŒä¹…åŒ–å­˜å‚¨)

## ğŸ’¡ è®¾è®¡ç†å¿µ

1. **é›¶å­¦ä¹ æˆæœ¬**: ç›´è§‚çš„ç•Œé¢ï¼Œä¸€çœ‹å°±æ‡‚
2. **å¼€ç®±å³ç”¨**: ä¸€é”®å¯åŠ¨ï¼Œæ— éœ€å¤æ‚é…ç½®
3. **æ˜“äºé›†æˆ**: æ¸…æ™°çš„æ¥å£ï¼Œç®€å•å¯¹æ¥åç«¯
4. **è§†è§‰å†²å‡»**: ç‹¬ç‰¹çš„ç§‘æŠ€ç¾å­¦ï¼Œé¿å…åƒç¯‡ä¸€å¾‹
5. **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æµ‹è¯•ç•Œé¢**: è¿è¡Œ `python start.py` æŸ¥çœ‹æ•ˆæœ
2. **é›†æˆåç«¯**: ä¿®æ”¹ `api_server.py` è¿æ¥ä½ çš„ Agent
3. **è‡ªå®šä¹‰æ ·å¼**: è°ƒæ•´é…è‰²å’Œå­—ä½“
4. **æ·»åŠ åŠŸèƒ½**: æ ¹æ®éœ€æ±‚æ‰©å±•æ–°ç‰¹æ€§

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜? æ£€æŸ¥:
- æµè§ˆå™¨æ§åˆ¶å° (F12)
- åç«¯æ—¥å¿—è¾“å‡º
- `FRONTEND_GUIDE.md` ä¸­çš„æ•…éšœæ’é™¤ç« èŠ‚

---

**åˆ›å»ºæ—¥æœŸ**: 2026-02-05  
**ç‰ˆæœ¬**: 1.0.0  
**è®¾è®¡**: æœªæ¥ç§‘æŠ€éœ“è™¹é£  
**ä½œè€…**: Claude

äº«å—ä½ çš„ Web Agent æ§åˆ¶ä¸­å¿ƒ! ğŸš€
