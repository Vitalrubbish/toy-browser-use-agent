# 前端显示问题排查指南

## 问题: 打开前端后仍显示旧版本界面（如"浏览器预览"）

这是**浏览器缓存**导致的问题。浏览器保存了旧版本的 HTML/CSS/JS 文件。

## 🔧 解决方案

### 方法 1: 强制刷新（推荐，最快）

在浏览器中按以下快捷键强制刷新：

- **Windows/Linux**: `Ctrl + Shift + R` 或 `Ctrl + F5`
- **Mac**: `Cmd + Shift + R`

这会清除当前页面的缓存并重新加载。

---

### 方法 2: 清除浏览器缓存

#### Chrome/Edge:
1. 按 `F12` 打开开发者工具
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

或者:
1. 设置 → 隐私和安全 → 清除浏览数据
2. 选择"缓存的图片和文件"
3. 点击"清除数据"

#### Firefox:
1. 按 `Ctrl + Shift + Delete`
2. 选择"缓存"
3. 点击"立即清除"

#### Safari:
1. 偏好设置 → 高级 → 勾选"在菜单栏中显示开发菜单"
2. 开发 → 清空缓存
3. 刷新页面

---

### 方法 3: 使用无痕/隐私模式

打开浏览器的无痕窗口（不会使用缓存）:

- **Chrome/Edge**: `Ctrl + Shift + N`
- **Firefox**: `Ctrl + Shift + P`
- **Safari**: `Cmd + Shift + N`

然后在无痕窗口中打开 `http://localhost:8080/index.html`

---

### 方法 4: 在 URL 后添加版本参数

在地址栏输入:
```
http://localhost:8080/index.html?v=2
```

浏览器会认为这是一个新 URL，不会使用缓存。

---

### 方法 5: 禁用缓存（开发时使用）

1. 按 `F12` 打开开发者工具
2. 打开 Network（网络）标签
3. 勾选 "Disable cache"（禁用缓存）
4. 保持开发者工具打开状态
5. 刷新页面

---

## ✅ 验证是否成功

成功加载新版本后，你应该看到:

- ✅ 右上方面板标题是"**执行结果记录**"（不是"浏览器预览"或"操作步骤记录"）
- ✅ 占位符文字是"等待任务执行..."
- ✅ 启动任务后会显示结果卡片，包含"提取数据"、"页面信息"等

---

## 🔍 如何确认是缓存问题

1. 在浏览器中按 `F12` 打开开发者工具
2. 切换到 Console（控制台）标签
3. 刷新页面
4. 查看是否有类似这样的消息：
   ```
   index.html (from disk cache)
   ```
   
如果看到 "from disk cache" 或 "from memory cache"，就说明是缓存问题。

---

## 📝 开发建议

如果你经常修改前端代码，建议:

1. **始终在开发者工具打开的状态下工作**，并勾选"Disable cache"
2. **使用无痕模式**进行测试
3. **修改文件后在命令行重启服务器**:
   ```bash
   # 停止当前服务器 (Ctrl+C)
   # 重新启动
   python -m http.server 8080
   ```

---

## 🚨 如果仍然看不到更新

如果尝试了以上所有方法仍看到旧版本:

### 1. 确认正在访问正确的文件

在浏览器地址栏确认 URL 是:
```
http://localhost:8080/index.html
```

而不是:
```
file:///path/to/old/index.html
```

### 2. 检查文件是否在正确位置

在终端运行:
```bash
cd /mnt/user-data/outputs
ls -lh index.html
```

确认文件修改时间是最新的（应该是 Feb 6 01:15 或更晚）

### 3. 查看文件内容

```bash
grep "执行结果记录" /mnt/user-data/outputs/index.html
```

应该能找到这个文本。如果找不到，说明文件可能没有正确更新。

### 4. 手动验证文件内容

在浏览器中查看源代码:
- 右键点击页面 → "查看网页源代码"
- 按 `Ctrl + F` 搜索 "执行结果记录"

如果找不到，说明浏览器加载的是旧文件。

---

## 💡 快速测试方法

创建一个测试 HTML 文件来验证服务器是否正常:

```bash
echo "<h1>测试 - $(date)</h1>" > /mnt/user-data/outputs/test.html
```

然后在浏览器访问:
```
http://localhost:8080/test.html
```

如果能看到当前时间，说明服务器正常，问题确实是缓存。

---

## 📞 还是不行？

如果尝试了所有方法仍然有问题，请提供以下信息:

1. 浏览器名称和版本
2. 当前看到的界面标题（截图）
3. 浏览器开发者工具中的 Console 输出
4. 文件修改时间: `ls -lh /mnt/user-data/outputs/index.html`

---

**最常见的解决方案**: `Ctrl + Shift + R` (硬刷新) 🔄
